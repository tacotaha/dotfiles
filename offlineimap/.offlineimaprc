[general]
accounts = taha_azzaoui@student.uml.edu, taha.azzaoui@protonmail.com
pythonfile = ~/.offlineimap.py
autorefresh = 5
maxsyncaccounts = 6

[Account taha_azzaoui@student.uml.edu]
type = Maildir
localfolders = ~/Mail/taha_azzaoui@student.uml.edu
localrepository = taha_azzaoui@student.uml.edu-Local
remoterepository = taha_azzaoui@student.uml.edu-Remote

[Repository taha_azzaoui@student.uml.edu-Local]
type = Maildir
localfolders = ~/Mail/taha_azzaoui@student.uml.edu

[Repository taha_azzaoui@student.uml.edu-Remote]
type = IMAP
remoteuser = Taha_Azzaoui@student.uml.edu
remotepasseval = mailpasswd("taha_azzaoui@student.uml.edu")
remotehost = outlook.office365.com
remoteport = 993
realdelete = no
ssl = yes
sslcacertfile = /etc/ssl/certs/ca-certificates.crt
folderfilter = lambda folder: folder in ['INBOX', 'Sent', 'Drafts', 'Sent Items', 'Trash']

[Account taha.azzaoui@protonmail.com]
localfolders = ~/Mail/taha.azzaoui@protonmail.com
localrepository = taha.azzaoui@protonmail.com-Local
remoterepository = taha.azzaoui@protonmail.com-Remote

# full refresh, in min
autorefresh = 0.2

# quick refreshs between each full refresh
quick = 10

# update notmuch index after sync
postsynchook = notmuch new


[Repository taha.azzaoui@protonmail.com-Local]
type = Maildir
localfolders = ~/Mail/taha.azzaoui@protonmail.com

# delete remote mails that were deleted locally
sync_deletes = yes

[Repository taha.azzaoui@protonmail.com-Remote]
type = IMAP
remoteport = 1143
remotehost = 127.0.0.1
remoteuser = Taha.Azzaoui@protonmail.com
remotepasseval = mailpasswd("protonmail-onetime")
keepalive = 60
holdconnectionopen = yes

# delete local mails that were deleted on the remote server
expunge = yes

# sync only these folders
folderfilter = lambda foldername: foldername in ['INBOX', 'Drafts', 'Sent', 'Trash']

# is broken, but connecting locally to bridge so should be ok
ssl = no
